<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Bassoon &middot; Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Bassoon</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Signing">Signing </a></li>
<li><a href="#JWT___JSON_Web_Tokens">JWT - JSON Web Tokens </a></li>
<li><a href="#Purpose">Purpose </a></li>
<li><a href="#Documentation">Documentation </a></li>
</ul>


<h2>Topics</h2>
<ul class="">
  <li><strong>Bassoon</strong></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/bassoon.util.html">bassoon.util</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/Signer.html">Signer</a></li>
  <li><a href="../classes/JWTSerializer.html">JWTSerializer</a></li>
</ul>

</div>

<div id="content">


<h1>Bassoon - MoonScript HMAC (via OpenSSL) and JWT</h1>

<p><a name="Signing"></a></p>
<h2>Signing</h2>

<p>SHA-1 and SHA-2 methods are used for hashing text to an irreversible output and
HMAC is used for signing text with a 24-bit key. There is a <code>Signer()</code> class
and a <code>util.random_key</code> function.</p>

<p>It is not recommended to use any other methods that aren't ensured to exist
in your system's OpenSSL library. <code>md5</code> is also proven to be vulnerable to
multiple attacks and will raise an error if is attempted to be used.</p>


<pre>
import Signer from <span class="global">require</span> <span class="string">"bassoon"</span>
import random_key from <span class="global">require</span> <span class="string">"signer.util"</span>

signer = Signer random_key!, separator: <span class="string">"."</span>, digest_method: <span class="string">"sha1"</span>

text = signer\sign <span class="string">"user=ryan"</span>
<span class="global">assert</span> signer\verify(text) == <span class="string">"user=ryan"</span>
</pre>


<p>Basically, <code>signer\sign()</code> should be sent to a client, and <code>signer\verify()</code>
should be used to verify content received from a client.</p>

<p><a name="JWT___JSON_Web_Tokens"></a></p>
<h2>JWT - JSON Web Tokens</h2>

<p>JSON Web Tokens are pieces of data that can be understood by web browsers and
other utilities. They're different to the above signing in that the algorithm
used for verification is stored in a header for the request and uses three
segments instead of two. The format also uses JSON for transferring data,
meaning data can be expected to deserialize into JSON-compatible values.</p>


<pre>
import JWTSerializer from <span class="global">require</span> <span class="string">"bassoon.jwt"</span>
serializer = JWTSerializer!
data = serializer\encode {
    a: <span class="string">"b"</span>
    c: {<span class="string">"hello"</span>, <span class="string">"world"</span>}
} <span class="comment">-- produces a JWT with tbe body as {"a": "b", "c": ["hello", "world"]}
</span><span class="global">print</span> <span class="global">table</span>.concat serializer\decode data.c
</pre>


<p><a name="Purpose"></a></p>
<h2>Purpose</h2>

<p>Web applications often use cookies to store login information such as tokens
that can be used for authentication. However, this data can be brute-forced by
the server. By using a cryptographically random key for signing the text, this
means that both a login token <strong>and</strong> a signature are required for gaining
access. While it's not impossible to brute force, it's much harder. It can also
be impossible to detect which is invalid - the token or the signature - making
this method much more secure than simply providing a token and allowing an
attacker to brute force a token.</p>

<p><a name="Documentation"></a></p>
<h2>Documentation</h2>

<p>... can be found in ./docs, or compiled with LDoc.</p>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2017-07-30 00:47:05 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
